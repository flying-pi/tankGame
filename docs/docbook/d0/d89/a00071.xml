<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="d0/d89/a00071">
    <title>field.cpp File Reference</title>
    <programlisting>#include &quot;field.h&quot;</programlisting>
    <programlisting>#include &lt;QDebug&gt;</programlisting>
<para>Include dependency diagram for field.cpp</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d6/d2c/a00072.svg"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
<para>Included by dependency diagram for field.cpp</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d1/d6e/a00073.svg"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
        <section>
            <title>Functions</title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>QImage <link linkend="d0/d89/a00071_1a9661f3e3f0b4301dd53d9588fcdbfc04">loadTexture2</link> (
char * filename, GLuint &amp; textureID)</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file /Users/yurabraiko/dev/qt/TankGame/GameView/field.cpp</para>
    </simplesect>
    <literallayout><computeroutput>
1 <emphasis class="preprocessor">#include&#32;&quot;<link linkend="db/db6/a00074">field.h</link>&quot;</emphasis>
2 <emphasis class="preprocessor">#include&#32;&lt;QDebug&gt;</emphasis>
3 
<link linkend="d7/d3f/a00173_1ab3e028578ffc9df6d7d12dbbc83be19f">4 </link><link linkend="d7/d3f/a00173_1ab3e028578ffc9df6d7d12dbbc83be19f">Field::Field</link>(QWidget*&#32;parent)&#32;:&#32;QGLWidget(parent)&#32;{
5 &#32;&#32;<link linkend="d7/d3f/a00173_1a7cd047782edbf1436174dfc2aeea1bdc">fieldState</link>&#32;=&#32;<emphasis class="keyword">new</emphasis>&#32;QList&lt;IBaseGameElement*&gt;();
6 &#32;&#32;<link linkend="d7/d3f/a00173_1ac2d8f10e9bccfe3cf51cf534c73cecd4">initRes</link>();
7 }
8 
<link linkend="d7/d3f/a00173_1a45d6e6d09b8f8e46de62b40119d62c60">9 </link><link linkend="d7/d3f/a00173_1a45d6e6d09b8f8e46de62b40119d62c60">Field::~Field</link>()&#32;{
10 &#32;&#32;<emphasis class="keyword">delete</emphasis>&#32;<link linkend="d7/d3f/a00173_1a7cd047782edbf1436174dfc2aeea1bdc">fieldState</link>;
11 }
12 
<link linkend="d7/d3f/a00173_1a407d6701413d3627ef50e9e86786b987">13 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d7/d3f/a00173_1a407d6701413d3627ef50e9e86786b987">Field::onDiffReceive</link>(QList&lt;DiffElement*&gt;*&#32;diff)&#32;{
14 &#32;&#32;<emphasis class="keywordflow">for</emphasis>&#32;(<emphasis class="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;diff-&gt;length();&#32;i++)&#32;{
15 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(diff-&gt;at(i)-&gt;type&#32;==&#32;<link linkend="d6/d2d/a00047_1ab32e61d383765a32bc5f9efebb4b9f55a431f77ddbb89863e0f6dbf088b85628c">eDiffType::eNew</link>)&#32;{
16 &#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="d7/d3f/a00173_1a7cd047782edbf1436174dfc2aeea1bdc">fieldState</link>-&gt;append(diff-&gt;at(i)-&gt;data);
17 &#32;&#32;&#32;&#32;}
18 &#32;&#32;}
19 &#32;&#32;update();
20 }
<link linkend="d7/d3f/a00173_1a38484502a93b5cd191d8ababc415e0cb">21 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d7/d3f/a00173_1a38484502a93b5cd191d8ababc415e0cb">Field::initializeGL</link>()&#32;{}
22 
<link linkend="d7/d3f/a00173_1a4122f1e70a73ec6c580029d968e4553c">23 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d7/d3f/a00173_1a4122f1e70a73ec6c580029d968e4553c">Field::resizeGL</link>(<emphasis class="keywordtype">int</emphasis>&#32;w,&#32;<emphasis class="keywordtype">int</emphasis>&#32;h)&#32;{}
24 
<link linkend="d7/d3f/a00173_1a43d725e582133d23bcbebdcd7bd4a287">25 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d7/d3f/a00173_1a43d725e582133d23bcbebdcd7bd4a287">Field::paintGL</link>()&#32;{
26 &#32;&#32;glClearColor(0.1f,&#32;0.1f,&#32;0.1f,&#32;1.0f);
27 &#32;&#32;glClear(GL_COLOR_BUFFER_BIT&#32;|&#32;GL_DEPTH_BUFFER_BIT);
28 &#32;&#32;glTranslatef(-1,&#32;-1,&#32;0);
29 &#32;&#32;<emphasis class="keywordflow">for</emphasis>&#32;(<emphasis class="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;<link linkend="d7/d3f/a00173_1a7cd047782edbf1436174dfc2aeea1bdc">fieldState</link>-&gt;length();&#32;i++)&#32;{
30 &#32;&#32;&#32;&#32;<emphasis class="keyword">auto</emphasis>&#32;currentElement&#32;=&#32;<link linkend="d7/d3f/a00173_1a7cd047782edbf1436174dfc2aeea1bdc">fieldState</link>-&gt;at(i);
31 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(currentElement-&gt;getType()&#32;==&#32;(int)<link linkend="d6/d2d/a00047_1a5afb9d86324dabec6a0c73f9b6aa1bafa107c023644773dc2cde1d0047d6bc79c">eBaseGameElementType::eGrass</link>)&#32;{
32 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d7/d3f/a00173_1a05becf8069f37b0529b691fcdd1ca8f1">drawGrass</link>(currentElement-&gt;getPosition()-&gt;x(),
33 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;currentElement-&gt;getPosition()-&gt;y());
34 &#32;&#32;&#32;&#32;}
35 &#32;&#32;}
36 &#32;&#32;glTranslatef(1,&#32;1,&#32;0);
37 &#32;&#32;<emphasis class="comment">//&#32;&#32;glEnd();</emphasis>
38 
39 &#32;&#32;<emphasis class="comment">//&#32;&#32;glDisable(GL_TEXTURE_2D);</emphasis>
40 }
41 
<link linkend="d0/d89/a00071_1a9661f3e3f0b4301dd53d9588fcdbfc04">42 </link>QImage&#32;<link linkend="d0/d89/a00071_1a9661f3e3f0b4301dd53d9588fcdbfc04">loadTexture2</link>(<emphasis class="keywordtype">char</emphasis>*&#32;filename,&#32;GLuint&amp;&#32;textureID)&#32;{
43 &#32;&#32;glEnable(GL_TEXTURE_2D);&#32;&#32;<emphasis class="comment">//&#32;Enable&#32;texturing</emphasis>
44 
45 &#32;&#32;glGenTextures(1,&#32;&amp;textureID);&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Obtain&#32;an&#32;id&#32;for&#32;the&#32;texture</emphasis>
46 &#32;&#32;glBindTexture(GL_TEXTURE_2D,&#32;textureID);&#32;&#32;<emphasis class="comment">//&#32;Set&#32;as&#32;the&#32;current&#32;texture</emphasis>
47 
48 &#32;&#32;glPixelStorei(GL_UNPACK_ALIGNMENT,&#32;1);
49 &#32;&#32;glTexEnvf(GL_TEXTURE_ENV,&#32;GL_TEXTURE_ENV_MODE,&#32;GL_DECAL);
50 
51 &#32;&#32;QImage&#32;im(filename);
52 &#32;&#32;QImage&#32;tex&#32;=&#32;QGLWidget::convertToGLFormat(im);
53 
54 &#32;&#32;glTexImage2D(GL_TEXTURE_2D,&#32;0,&#32;GL_RGBA,&#32;tex.width(),&#32;tex.height(),&#32;0,&#32;GL_RGBA,
55 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GL_UNSIGNED_BYTE,&#32;tex.bits());
56 
57 &#32;&#32;glTexParameteri(GL_TEXTURE_2D,&#32;GL_TEXTURE_MAG_FILTER,&#32;GL_LINEAR);
58 &#32;&#32;glTexParameteri(GL_TEXTURE_2D,&#32;GL_TEXTURE_MIN_FILTER,&#32;GL_LINEAR);
59 
60 &#32;&#32;glDisable(GL_TEXTURE_2D);
61 
62 &#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;tex;
63 }
64 
<link linkend="d7/d3f/a00173_1ac2d8f10e9bccfe3cf51cf534c73cecd4">65 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d7/d3f/a00173_1ac2d8f10e9bccfe3cf51cf534c73cecd4">Field::initRes</link>()&#32;{
66 &#32;&#32;<link linkend="d0/d89/a00071_1a9661f3e3f0b4301dd53d9588fcdbfc04">loadTexture2</link>(<emphasis class="stringliteral">&quot;:/res/grass.png&quot;</emphasis>,&#32;<link linkend="d7/d3f/a00173_1a4b226d02ce54a5d320cf3dc99b7b8433">grass</link>);
67 }
68 
<link linkend="d7/d3f/a00173_1a05becf8069f37b0529b691fcdd1ca8f1">69 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d7/d3f/a00173_1a05becf8069f37b0529b691fcdd1ca8f1">Field::drawGrass</link>(<emphasis class="keywordtype">float</emphasis>&#32;x,&#32;<emphasis class="keywordtype">float</emphasis>&#32;y)&#32;{
70 &#32;&#32;<emphasis class="comment">//&#32;&#32;glEnable(GL_TEXTURE_2D);</emphasis>
71 &#32;&#32;<emphasis class="comment">//&#32;&#32;glBindTexture(GL_TEXTURE_2D,&#32;grass);</emphasis>
72 
73 &#32;&#32;<emphasis class="comment">//&#32;&#32;glBegin(GL_QUADS);</emphasis>
74 &#32;&#32;<emphasis class="comment">//&#32;&#32;glTexCoord2f(0,&#32;0);</emphasis>
75 &#32;&#32;<emphasis class="comment">//&#32;&#32;glVertex3f(-1,&#32;-1,&#32;-1);</emphasis>
76 &#32;&#32;<emphasis class="comment">//&#32;&#32;glTexCoord2f(1,&#32;0);</emphasis>
77 &#32;&#32;<emphasis class="comment">//&#32;&#32;glVertex3f(1,&#32;-1,&#32;-1);</emphasis>
78 &#32;&#32;<emphasis class="comment">//&#32;&#32;glTexCoord2f(1,&#32;1);</emphasis>
79 &#32;&#32;<emphasis class="comment">//&#32;&#32;glVertex3f(1,&#32;1,&#32;-1);</emphasis>
80 &#32;&#32;<emphasis class="comment">//&#32;&#32;glTexCoord2f(0,&#32;1);</emphasis>
81 &#32;&#32;<emphasis class="comment">//&#32;&#32;glVertex3f(-1,&#32;1,&#32;-1);</emphasis>
82 &#32;&#32;<emphasis class="comment">//&#32;.....</emphasis>
83 &#32;&#32;<emphasis class="comment">//&#32;&#32;glDisable(GL_TEXTURE_2D);</emphasis>
84 &#32;&#32;<emphasis class="keywordtype">float</emphasis>&#32;size&#32;=&#32;<link linkend="d7/d3f/a00173_1af59e50c5d976daa2af7f35f1f3ea2b7c">scaleK</link>;
85 &#32;&#32;glColor3f(0.560,&#32;0.956,&#32;0.258);
86 &#32;&#32;glBegin(GL_QUADS);
87 &#32;&#32;glVertex2f(x&#32;*&#32;this-&gt;<link linkend="d7/d3f/a00173_1af59e50c5d976daa2af7f35f1f3ea2b7c">scaleK</link>,&#32;y&#32;*&#32;scaleK);
88 &#32;&#32;glVertex2f(x&#32;*&#32;this-&gt;scaleK,&#32;y&#32;*&#32;scaleK&#32;+&#32;size);
89 &#32;&#32;glVertex2f(x&#32;*&#32;this-&gt;scaleK&#32;+&#32;size,&#32;y&#32;*&#32;scaleK&#32;+&#32;size);
90 &#32;&#32;glVertex2f(x&#32;*&#32;this-&gt;scaleK&#32;+&#32;size,&#32;y&#32;*&#32;scaleK);
91 &#32;&#32;glEnd();
92 }
    </computeroutput></literallayout>
</section>
