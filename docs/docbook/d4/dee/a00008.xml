<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="d4/dee/a00008">
    <title>simpleconnection.h File Reference</title>
    <programlisting>#include &lt;QHostAddress&gt;</programlisting>
    <programlisting>#include &lt;QObject&gt;</programlisting>
    <programlisting>#include &lt;QThread&gt;</programlisting>
    <programlisting>#include &lt;QQueue&gt;</programlisting>
    <programlisting>#include &lt;QTcpSocket&gt;</programlisting>
    <programlisting>#include &lt;QDataStream&gt;</programlisting>
    <programlisting>#include &lt;ibasegameelement.h&gt;</programlisting>
<para>Include dependency diagram for simpleconnection.h</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../da/da0/a00009.svg"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
<para>Included by dependency diagram for simpleconnection.h</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d7/dec/a00010.svg"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
        <section>
            <title> Classes </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="d8/dfa/a00121">MessageForServer</link></para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="dc/dfe/a00125">SimpleConnection</link></para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="d9/d47/a00129">SimpleConnection::MessageBuilder</link></para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="d0/de8/a00133">SimpleConnection::Receiver</link></para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section>
            <title>Enumerations</title>
            <para>
                <itemizedlist>
                    <listitem>
                            <para><literallayout>enum <link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link> {
<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296ab02a4c796f7681c9c90e0c0865392828">eGamer</link>,
<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296af8a067d45287f02c8cd709a3495eb581">eWatcher</link>
}</literallayout>
</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                            <para><literallayout>enum <link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">eMessageType</link> {
<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010aeab6dec369184e6c7d133812064686f9">eFirstMessae</link>,
<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010a0bc33fe8075a87a68af6a432b13d7b66">eGetUpdateMessage</link>
}</literallayout>
</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section>
            <title>Functions</title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>QString <link linkend="d4/dee/a00008_1aabd3ff178ce3faed55804cc56f78fc6a">stringify</link> (
<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link> e)</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>QString <link linkend="d4/dee/a00008_1abb3e44449c2fd1fa9275c1d4273c66f9">stringify</link> (
<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">eMessageType</link> e)</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file /Users/yurabraiko/dev/qt/TankGame/Core/connection/simpleconnection.h</para>
    </simplesect>
    <literallayout><computeroutput>
1 <emphasis class="preprocessor">#ifndef&#32;SIMPLECONNECTION_H</emphasis>
2 <emphasis class="preprocessor">#define&#32;SIMPLECONNECTION_H</emphasis>
3 
4 <emphasis class="preprocessor">#include&#32;&lt;QHostAddress&gt;</emphasis>
5 <emphasis class="preprocessor">#include&#32;&lt;QObject&gt;</emphasis>
6 <emphasis class="preprocessor">#include&#32;&lt;QThread&gt;</emphasis>
7 <emphasis class="preprocessor">#include&#32;&lt;QQueue&gt;</emphasis>
8 <emphasis class="preprocessor">#include&#32;&lt;QTcpSocket&gt;</emphasis>
9 <emphasis class="preprocessor">#include&#32;&lt;QDataStream&gt;</emphasis>
10 <emphasis class="preprocessor">#include&#32;&lt;<link linkend="d6/d2d/a00047">ibasegameelement.h</link>&gt;</emphasis>
11 
<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296af8a067d45287f02c8cd709a3495eb581">12 </link><emphasis class="keyword">enum</emphasis>&#32;<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link>&#32;{&#32;<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296ab02a4c796f7681c9c90e0c0865392828">eGamer</link>,&#32;<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296af8a067d45287f02c8cd709a3495eb581">eWatcher</link>&#32;};
<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">13 </link><emphasis class="keyword">enum</emphasis>&#32;<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">eMessageType</link>&#32;{&#32;<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010aeab6dec369184e6c7d133812064686f9">eFirstMessae</link>,&#32;<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010a0bc33fe8075a87a68af6a432b13d7b66">eGetUpdateMessage</link>&#32;};
14 
15 QString&#32;<link linkend="d4/dee/a00008_1aabd3ff178ce3faed55804cc56f78fc6a">stringify</link>(<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link>&#32;e);
16 QString&#32;<link linkend="d4/dee/a00008_1aabd3ff178ce3faed55804cc56f78fc6a">stringify</link>(<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">eMessageType</link>&#32;e);
17 
<link linkend="d8/dfa/a00121">18 </link><emphasis class="keyword">class&#32;</emphasis><link linkend="d8/dfa/a00121">MessageForServer</link>&#32;:&#32;<emphasis class="keyword">public</emphasis>&#32;QObject&#32;{
19 &#32;&#32;Q_OBJECT
20 
21 &#32;<emphasis class="keyword">public</emphasis>:
<link linkend="d8/dfa/a00121_1a32f7c4034883ac363ca247c8a2843040">22 </link>&#32;&#32;<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link>&#32;<link linkend="d8/dfa/a00121_1a32f7c4034883ac363ca247c8a2843040">connectionType</link>;
<link linkend="d8/dfa/a00121_1a77e3d9ee30093b40db7f2d8f5d7590aa">23 </link>&#32;&#32;<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">eMessageType</link>&#32;<link linkend="d8/dfa/a00121_1a77e3d9ee30093b40db7f2d8f5d7590aa">messageType</link>;
24 
<link linkend="d8/dfa/a00121_1a0562e6e482b8c98c43d4351d63fe9a97">25 </link>&#32;&#32;<emphasis class="keyword">friend</emphasis>&#32;QDataStream&amp;&#32;<link linkend="d8/dfa/a00121_1a0562e6e482b8c98c43d4351d63fe9a97">operator&lt;&lt;</link>(QDataStream&amp;&#32;stream,
26 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keyword">const</emphasis>&#32;<link linkend="d8/dfa/a00121">MessageForServer</link>&amp;&#32;myclass)&#32;{
27 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;stream&#32;&lt;&lt;&#32;((int)myclass.<link linkend="d8/dfa/a00121_1a32f7c4034883ac363ca247c8a2843040">connectionType</link>)
28 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&lt;&lt;&#32;((int)myclass.<link linkend="d8/dfa/a00121_1a77e3d9ee30093b40db7f2d8f5d7590aa">messageType</link>);
29 &#32;&#32;}
<link linkend="d8/dfa/a00121_1a80c0e129812710b29e5cabd9e412387b">30 </link>&#32;&#32;<emphasis class="keyword">friend</emphasis>&#32;QDataStream&amp;&#32;<link linkend="d8/dfa/a00121_1a80c0e129812710b29e5cabd9e412387b">operator&gt;&gt;</link>(QDataStream&amp;&#32;stream,
31 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d8/dfa/a00121">MessageForServer</link>&amp;&#32;myclass)&#32;{
32 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">int</emphasis>&#32;con;
33 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">int</emphasis>&#32;msg;
34 &#32;&#32;&#32;&#32;QDataStream&amp;&#32;result&#32;=&#32;(stream&#32;&gt;&gt;&#32;con&#32;&gt;&gt;&#32;msg);
35 &#32;&#32;&#32;&#32;myclass.<link linkend="d8/dfa/a00121_1a32f7c4034883ac363ca247c8a2843040">connectionType</link>&#32;=&#32;(<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link>)con;
36 &#32;&#32;&#32;&#32;myclass.<link linkend="d8/dfa/a00121_1a77e3d9ee30093b40db7f2d8f5d7590aa">messageType</link>&#32;=&#32;(<link linkend="d4/dee/a00008_1a700ed30d49bfe436323e17539d3a0010">eMessageType</link>)msg;
37 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;result;
38 &#32;&#32;}
39 
<link linkend="d8/dfa/a00121_1ab72134ee0c57b530f11fe2f24c205979">40 </link>&#32;&#32;<emphasis class="keyword">friend</emphasis>&#32;QDebug&#32;<link linkend="d8/dfa/a00121_1ab72134ee0c57b530f11fe2f24c205979">operator&lt;&lt;</link>(QDebug&#32;debug,&#32;<link linkend="d8/dfa/a00121">MessageForServer</link>&amp;&#32;c)&#32;{
41 &#32;&#32;&#32;&#32;QDebugStateSaver&#32;saver(debug);
42 &#32;&#32;&#32;&#32;debug.nospace()&#32;&lt;&lt;&#32;c.<link linkend="d8/dfa/a00121_1a9b98301583759754caf829cc1ed1520d">toString</link>();
43 
44 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;debug;
45 &#32;&#32;}
46 
47 &#32;&#32;QString&#32;<link linkend="d8/dfa/a00121_1a9b98301583759754caf829cc1ed1520d">toString</link>();
48 };
49 
<link linkend="dc/dfe/a00125">50 </link><emphasis class="keyword">class&#32;</emphasis><link linkend="dc/dfe/a00125">SimpleConnection</link>&#32;:&#32;<emphasis class="keyword">public</emphasis>&#32;QThread&#32;{
51 &#32;&#32;Q_OBJECT
52 &#32;<emphasis class="keyword">public</emphasis>:
53 &#32;&#32;<emphasis class="keyword">explicit</emphasis>&#32;<link linkend="dc/dfe/a00125">SimpleConnection</link>(QHostAddress&#32;adress,&#32;QObject*&#32;parent&#32;=&#32;0);
54 &#32;&#32;<emphasis class="keyword">virtual</emphasis>&#32;~<link linkend="dc/dfe/a00125">SimpleConnection</link>();
55 &#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;openConnection();
56 &#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;sendDiff(QList&lt;DiffElement*&gt;*&#32;diffs);
57 
<link linkend="d9/d47/a00129">58 </link>&#32;&#32;<emphasis class="keyword">class&#32;</emphasis><link linkend="d9/d47/a00129">MessageBuilder</link>&#32;{
<link linkend="d9/d47/a00129_1a7539cf9ee12d3fa81d3d8702d8646c89">59 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">friend</emphasis>&#32;<emphasis class="keyword">class&#32;</emphasis><link linkend="dc/dfe/a00125">SimpleConnection</link>;
60 
61 &#32;&#32;&#32;&#32;<link linkend="d9/d47/a00129">MessageBuilder</link>(<link linkend="dc/dfe/a00125">SimpleConnection</link>*&#32;sender);
62 
63 &#32;&#32;&#32;<emphasis class="keyword">public</emphasis>:
64 &#32;&#32;&#32;&#32;<link linkend="d9/d47/a00129">MessageBuilder</link>*&#32;asFirstMessage(<link linkend="d4/dee/a00008_1ab66d8802c50493de7d50e181d6f8e296">eConnectionType</link>&#32;type);
65 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;build();
66 
67 &#32;&#32;&#32;<emphasis class="keyword">private</emphasis>:
<link linkend="d9/d47/a00129_1a7a57d1afb561f7fe4b813e611c3269a7">68 </link>&#32;&#32;&#32;&#32;<link linkend="d8/dfa/a00121">MessageForServer</link>*&#32;<link linkend="d9/d47/a00129_1a7a57d1afb561f7fe4b813e611c3269a7">message</link>;
<link linkend="d9/d47/a00129_1a377817a44c6b088e5027365f8d6c8c8f">69 </link>&#32;&#32;&#32;&#32;<link linkend="dc/dfe/a00125">SimpleConnection</link>*&#32;<link linkend="d9/d47/a00129_1a377817a44c6b088e5027365f8d6c8c8f">parent</link>;
70 &#32;&#32;};
71 
72 &#32;&#32;<link linkend="d9/d47/a00129">MessageBuilder</link>*&#32;<link linkend="dc/dfe/a00125_1a2bbd5504e2e67fa95a701f77cd438f4d">getBulder</link>();
73 
74 &#32;signals:
75 &#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dc/dfe/a00125_1acd96d2282378dd8262c96604ede3715f">onDiffReceive</link>(QList&lt;DiffElement*&gt;*&#32;diffs);
76 
77 &#32;<emphasis class="keyword">public</emphasis>&#32;slots:
78 
79 &#32;<emphasis class="keyword">protected</emphasis>&#32;slots:
80 &#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dc/dfe/a00125_1a8360af71c89a54be93430b746d5fae08">onSocketError</link>(QAbstractSocket::SocketError&#32;error);
81 
82 &#32;&#32;<emphasis class="comment">//&#32;QThread&#32;interface</emphasis>
83 &#32;<emphasis class="keyword">protected</emphasis>:
<link linkend="dc/dfe/a00125_1a45a1e7ba5a9538bd382d24d364d0bbe5">84 </link>&#32;&#32;<emphasis class="keyword">volatile</emphasis>&#32;<emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="dc/dfe/a00125_1a45a1e7ba5a9538bd382d24d364d0bbe5">isWork</link>&#32;=&#32;<emphasis class="keyword">true</emphasis>;
85 &#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dc/dfe/a00125_1a35045483589d14a436ee83346365ce70">run</link>();
<link linkend="dc/dfe/a00125_1afd0b4e345d57b690f1a1e12c4816e268">86 </link>&#32;&#32;QHostAddress&#32;<link linkend="dc/dfe/a00125_1afd0b4e345d57b690f1a1e12c4816e268">adress</link>;
<link linkend="dc/dfe/a00125_1aee87a3e761deb38bce08ebb30cd73362">87 </link>&#32;&#32;QTcpSocket*&#32;<link linkend="dc/dfe/a00125_1aee87a3e761deb38bce08ebb30cd73362">socket</link>;
88 
<link linkend="dc/dfe/a00125_1a8db5848b9d5d30739d609feb973b86d2">89 </link>&#32;&#32;QDataStream*&#32;<link linkend="dc/dfe/a00125_1a8db5848b9d5d30739d609feb973b86d2">out</link>;
90 
<link linkend="dc/dfe/a00125_1acb6f6147828cec46cc69459f0de82cb0">91 </link>&#32;&#32;QMutex&#32;<link linkend="dc/dfe/a00125_1acb6f6147828cec46cc69459f0de82cb0">mutex</link>;
<link linkend="dc/dfe/a00125_1aadfc449afe00e48e200ae5f94bc9f2f7">92 </link>&#32;&#32;QQueue&lt;MessageForServer*&gt;&#32;<link linkend="dc/dfe/a00125_1aadfc449afe00e48e200ae5f94bc9f2f7">messages</link>;
93 
94 &#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dc/dfe/a00125_1a0e40869759ba98f1964257d9c507b733">addMessage</link>(<link linkend="d9/d47/a00129">MessageBuilder</link>*&#32;messages);
95 
<link linkend="d0/de8/a00133">96 </link>&#32;&#32;<emphasis class="keyword">class&#32;</emphasis><link linkend="d0/de8/a00133">Receiver</link>&#32;:&#32;<emphasis class="keyword">public</emphasis>&#32;QThread&#32;{
97 &#32;&#32;&#32;<emphasis class="keyword">public</emphasis>:
98 &#32;&#32;&#32;&#32;<link linkend="d0/de8/a00133">Receiver</link>(QTcpSocket*&#32;socket,
99 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dc/dfe/a00125">SimpleConnection</link>*&#32;parentThread,
100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;QObject*&#32;parent&#32;=&#32;0);
101 &#32;&#32;&#32;&#32;<emphasis class="keyword">virtual</emphasis>&#32;~<link linkend="d0/de8/a00133">Receiver</link>();
102 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">bool</emphasis>&#32;istThreadStart();
103 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;stop();
104 
105 &#32;&#32;&#32;<emphasis class="keyword">protected</emphasis>:
<link linkend="d0/de8/a00133_1a2a61dfb0c5aaff07952e9cc933329fe4">106 </link>&#32;&#32;&#32;&#32;QTcpSocket*&#32;<link linkend="d0/de8/a00133_1a2a61dfb0c5aaff07952e9cc933329fe4">socket</link>;
<link linkend="d0/de8/a00133_1aa4c39c627b02662a6f68885aa8fca85b">107 </link>&#32;&#32;&#32;&#32;QDataStream*&#32;<link linkend="d0/de8/a00133_1aa4c39c627b02662a6f68885aa8fca85b">in</link>;
<link linkend="d0/de8/a00133_1a86812570e3dd426878732f5ea4ae3b9e">108 </link>&#32;&#32;&#32;&#32;<link linkend="dc/dfe/a00125">SimpleConnection</link>*&#32;<link linkend="d0/de8/a00133_1a86812570e3dd426878732f5ea4ae3b9e">parentThread</link>;
<link linkend="d0/de8/a00133_1ac47df189e93600b9bda2e1dca4e092c9">109 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">volatile</emphasis>&#32;<emphasis class="keywordtype">bool</emphasis>&#32;isStart&#32;=&#32;<emphasis class="keyword">false</emphasis>;
<link linkend="d0/de8/a00133_1acc9d38bc97267217323908d6aaae5972">110 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">volatile</emphasis>&#32;<emphasis class="keywordtype">bool</emphasis>&#32;isWork&#32;=&#32;<emphasis class="keyword">true</emphasis>;
<link linkend="d0/de8/a00133_1a7ed726c394f5e48761a19ccecc988173">111 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">volatile</emphasis>&#32;<emphasis class="keywordtype">bool</emphasis>&#32;isLoopActive&#32;=&#32;<emphasis class="keyword">false</emphasis>;
112 
113 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;QThread&#32;interface</emphasis>
114 &#32;&#32;&#32;<emphasis class="keyword">protected</emphasis>:
115 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;run();
116 &#32;&#32;};
117 };
118 
119 <emphasis class="preprocessor">#endif&#32;&#32;//&#32;SIMPLECONNECTION_H</emphasis>
    </computeroutput></literallayout>
</section>
