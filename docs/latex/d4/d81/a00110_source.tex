\hypertarget{a00110_source}{}\section{serverworker.\+h}
\label{a00110_source}\index{Server/serverworker.\+h@{Server/serverworker.\+h}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#}\textcolor{preprocessor}{ifndef} \textcolor{preprocessor}{SERVERWORKER\_H}
00002 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{SERVERWORKER\_H}
00003 
00004 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QTcpSocket}\textcolor{preprocessor}{>}
00005 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QThread}\textcolor{preprocessor}{>}
00006 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QDataStream}\textcolor{preprocessor}{>}
00007 
00008 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{connection}\textcolor{preprocessor}{/}\textcolor{preprocessor}{mailboxelement}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00009 
\Hypertarget{a00110_source_l00010}\hyperlink{a00185}{00010} \textcolor{keyword}{class} \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{ServerWorker} : \textcolor{keyword}{public} \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{QThread}, \textcolor{keyword}{public} 
      \hyperlink{a00205}{MailSender} \{
00011   \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{Q\_OBJECT}
\Hypertarget{a00110_source_l00012}\hyperlink{a00185_a767ca3da04cac0be47d1ee1da9eea938}{00012}   \textcolor{keyword}{friend} \textcolor{keyword}{class} \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{receiveRespnceThread};
00013 
00014  \textcolor{keyword}{public}:
00015   \hyperlink{a00185_aa8aee43d415cf337417a1d1f180ef03a}{ServerWorker}(QTcpSocket* socket);
00016  \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{signals}:
00017   \textcolor{keywordtype}{void} \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{onStop}(\hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{ServerWorker}* \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{worker});
00018 
00019   \textcolor{comment}{// QThread interface}
00020  \textcolor{keyword}{protected}:
00021   \textcolor{keywordtype}{void} \hyperlink{a00185_a8b4f9a11d13f0b4990ae72f87da010df}{run}();
00022 
00023  \textcolor{keyword}{protected}:
\Hypertarget{a00110_source_l00024}\hyperlink{a00189}{00024}   \textcolor{keyword}{struct} \hyperlink{a00189_abcaa9482893ea18f129f3b821e4b4ec8}{responceData} \{
00025    \textcolor{keyword}{public}:
\Hypertarget{a00110_source_l00026}\hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{00026}     \hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{responceData}(\hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{QList}<\hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{DiffElement}*>* \hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{diff}, 
      \hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{MessageForServer}* \hyperlink{a00189_a7a5eda32e5aa3266882ecc57d89ff798}{messag}) \{
00027       \textcolor{keyword}{this}->diff = diff;
00028       \textcolor{keyword}{this}\hyperlink{a00189_a0915cfbfe5884aecde59303745ced47b}{->}\hyperlink{a00189_a0915cfbfe5884aecde59303745ced47b}{messag} = \hyperlink{a00189_a0915cfbfe5884aecde59303745ced47b}{messag};
00029     \}
00030 
\Hypertarget{a00110_source_l00031}\hyperlink{a00189_abcaa9482893ea18f129f3b821e4b4ec8}{00031}     \hyperlink{a00189_abcaa9482893ea18f129f3b821e4b4ec8}{QList}<\hyperlink{a00189_abcaa9482893ea18f129f3b821e4b4ec8}{DiffElement}*>* \hyperlink{a00189_abcaa9482893ea18f129f3b821e4b4ec8}{diff};
\Hypertarget{a00110_source_l00032}\hyperlink{a00189_a0915cfbfe5884aecde59303745ced47b}{00032}     \hyperlink{a00121_a32f7c4034883ac363ca247c8a2843040}{MessageForServer}* \hyperlink{a00189_a0915cfbfe5884aecde59303745ced47b}{messag};
00033   \};
00034 
\Hypertarget{a00110_source_l00035}\hyperlink{a00185_a8f7ef6413cb2697dff4a71835fa5b93d}{00035}   \hyperlink{a00185_a8f7ef6413cb2697dff4a71835fa5b93d}{QTcpSocket}* \hyperlink{a00185_a8f7ef6413cb2697dff4a71835fa5b93d}{socket};
\Hypertarget{a00110_source_l00036}\hyperlink{a00185_a237b637e43a66980b16463bab0b38ce4}{00036}   \textcolor{keyword}{volatile} \textcolor{keywordtype}{bool} \hyperlink{a00185_a237b637e43a66980b16463bab0b38ce4}{isWork} = \textcolor{keyword}{true};
\Hypertarget{a00110_source_l00037}\hyperlink{a00185_aa17ea4dcd487fd8bd6aab748d496a561}{00037}   \hyperlink{a00185_aa17ea4dcd487fd8bd6aab748d496a561}{QDataStream}* \hyperlink{a00185_aa17ea4dcd487fd8bd6aab748d496a561}{out};
\Hypertarget{a00110_source_l00038}\hyperlink{a00185_a7284c375ebf78a1dc24fbd801755e783}{00038}   \hyperlink{a00185_a7284c375ebf78a1dc24fbd801755e783}{QMutex} \hyperlink{a00185_a7284c375ebf78a1dc24fbd801755e783}{workerMutex};
\Hypertarget{a00110_source_l00039}\hyperlink{a00185_ac3d49b227a605c95f42569531f8dbe89}{00039}   \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{QQueue}<\hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{responceData}> \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{responceMessage};
00040 
\Hypertarget{a00110_source_l00041}\hyperlink{a00193}{00041}   \textcolor{keyword}{class} \hyperlink{a00193}{ReceiverThread} : \textcolor{keyword}{public} \hyperlink{a00193}{QThread} \{
00042    \textcolor{keyword}{public}:
00043     \hyperlink{a00193_a4d4ad81a3aa7b6b71eb8d9345f9b7924}{ReceiverThread}(\hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{ServerWorker}* parent, QTcpSocket* socket);
00044     \textcolor{keyword}{virtual} ~\hyperlink{a00193_a301c367fce51a745fef83c7c200f7eeb}{ReceiverThread}();
00045     \textcolor{keywordtype}{void} \hyperlink{a00193_ab4b5a368d07b2670c72be1a04404f76d}{stop}();
00046 
00047     \textcolor{comment}{// QThread interface}
00048    \textcolor{keyword}{protected}:
00049     \textcolor{keywordtype}{void} \hyperlink{a00193_ac4363547096e15a9a70e588e010855f9}{run}();
\Hypertarget{a00110_source_l00050}\hyperlink{a00193_a9dde916368513ce6a9548e923d2334fb}{00050}     \hyperlink{a00193_a9dde916368513ce6a9548e923d2334fb}{QTcpSocket}* \hyperlink{a00193_a9dde916368513ce6a9548e923d2334fb}{socket};
\Hypertarget{a00110_source_l00051}\hyperlink{a00193_a4fe56856b2917d124163c057319419ac}{00051}     \hyperlink{a00185_ab80ef665f93d81c71a83aa42f8d888df}{ServerWorker}* \hyperlink{a00193_a4fe56856b2917d124163c057319419ac}{parentThread};
\Hypertarget{a00110_source_l00052}\hyperlink{a00193_a15a77c31da23a15968944100e884b88e}{00052}     \hyperlink{a00193_a15a77c31da23a15968944100e884b88e}{QDataStream}* \hyperlink{a00193_a15a77c31da23a15968944100e884b88e}{in};
\Hypertarget{a00110_source_l00053}\hyperlink{a00193_a2b37a2d966c912535eb3463bc0d60a22}{00053}     \textcolor{keywordtype}{bool} \hyperlink{a00193_a2b37a2d966c912535eb3463bc0d60a22}{isWork} = \textcolor{keyword}{true};
\Hypertarget{a00110_source_l00054}\hyperlink{a00193_abd3ff6eaea0f4da20eeb987a57cbda4f}{00054}     \hyperlink{a00193_abd3ff6eaea0f4da20eeb987a57cbda4f}{QMutex} \hyperlink{a00193_abd3ff6eaea0f4da20eeb987a57cbda4f}{receiverMutex};
00055   \};
00056 
00057   \textcolor{comment}{// MailSender interface}
00058  \textcolor{keyword}{public}:
00059   \textcolor{keywordtype}{void} \hyperlink{a00185_a2cfa275ffeff3aeee19058e8155763f5}{receiveResponce}(\hyperlink{a00185_a2cfa275ffeff3aeee19058e8155763f5}{QList}<\hyperlink{a00185_a2cfa275ffeff3aeee19058e8155763f5}{DiffElement}*>* 
      \hyperlink{a00185_a2cfa275ffeff3aeee19058e8155763f5}{diff}, \hyperlink{a00185_a2cfa275ffeff3aeee19058e8155763f5}{MessageForServer}* \hyperlink{a00185_a2cfa275ffeff3aeee19058e8155763f5}{message});
00060 \};
00061 
00062 \textcolor{preprocessor}{#}\textcolor{preprocessor}{endif}  \textcolor{comment}{// SERVERWORKER\_H}
\end{DoxyCode}
