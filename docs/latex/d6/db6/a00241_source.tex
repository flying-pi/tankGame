\hypertarget{a00241_source}{}\section{main.\+cpp}
\label{a00241_source}\index{Server/main.\+cpp@{Server/main.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QCoreApplication}\textcolor{preprocessor}{>}
00002 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QDebug}\textcolor{preprocessor}{>}
00003 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QImage}\textcolor{preprocessor}{>}
00004 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{core}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00005 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QDebug}\textcolor{preprocessor}{>}
00006 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{QTime}\textcolor{preprocessor}{>}
00007 
00008 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \hyperlink{a00104}{"serverconnection.h"}
00009 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \hyperlink{a00092}{"maingameloop.h"}
00010 
\Hypertarget{a00241_source_l00011}\hyperlink{a00241_ab19c8b3d71e5789a489786830449e94b}{00011} \textcolor{keywordtype}{void} \hyperlink{a00241_ab19c8b3d71e5789a489786830449e94b}{onServerError}(\hyperlink{a00104_a65727a063024ff0dedf1ac2f087f4165}{serverError} error) \{
00012   qDebug() << \textcolor{stringliteral}{"some bad error :: "} << error;
00013 \}
00014 
\Hypertarget{a00241_source_l00015}\hyperlink{a00241_a3cfb6b17f20d62ad08b9402764f3aa6c}{00015} \textcolor{keywordtype}{void} \hyperlink{a00241_a3cfb6b17f20d62ad08b9402764f3aa6c}{initMainLooper}() \{
00016   \hyperlink{a00209_ac4cd47d8b350ae45ea09aaecad11a684}{MainGameLoop}* mainLooper = \hyperlink{a00209_ac4cd47d8b350ae45ea09aaecad11a684}{MainGameLoop}\hyperlink{a00209_ae4df98e12ba90efd73b144455d9fd52d}{::}
      \hyperlink{a00209_ae4df98e12ba90efd73b144455d9fd52d}{getLooperInstance}\hyperlink{a00209_ae4df98e12ba90efd73b144455d9fd52d}{(}\hyperlink{a00209_ae4df98e12ba90efd73b144455d9fd52d}{)};
00017   mainLooper\hyperlink{a00209_a2329f4e9c9a4ad9ecbed39d5c297245f}{->}\hyperlink{a00209_a2329f4e9c9a4ad9ecbed39d5c297245f}{startLooper}\hyperlink{a00209_a2329f4e9c9a4ad9ecbed39d5c297245f}{(}\hyperlink{a00209_a2329f4e9c9a4ad9ecbed39d5c297245f}{)};
00018 \}
00019 
\Hypertarget{a00241_source_l00020}\hyperlink{a00241_a29060721f5ddfa26790f0778bde74ff2}{00020} \textcolor{keywordtype}{void} \hyperlink{a00241_a29060721f5ddfa26790f0778bde74ff2}{initServer}() \{
00021   \hyperlink{a00181_af558fe509b60eb019281316513f6d188}{ServerConnection}* server = \hyperlink{a00181_af558fe509b60eb019281316513f6d188}{ServerConnection}
      \hyperlink{a00181_ad64d541093e285a983911f22ab9a0bff}{::}\hyperlink{a00181_ad64d541093e285a983911f22ab9a0bff}{getServerInstance}\hyperlink{a00181_ad64d541093e285a983911f22ab9a0bff}{(}\hyperlink{a00181_ad64d541093e285a983911f22ab9a0bff}{)};
00022   QObject::connect(server, &ServerConnection::onServerError, &onServerError);
00023   server->setDefaultReceiver(MainGameLoop::getLooperInstance());
00024   server\hyperlink{a00181_a1d45a6a7b2370c82ed2849959bb18c2a}{->}\hyperlink{a00181_a1d45a6a7b2370c82ed2849959bb18c2a}{startServer}\hyperlink{a00181_a1d45a6a7b2370c82ed2849959bb18c2a}{(}\hyperlink{a00181_a1d45a6a7b2370c82ed2849959bb18c2a}{)};
00025 \}
00026 
\Hypertarget{a00241_source_l00027}\hyperlink{a00241_a0ddf1224851353fc92bfbff6f499fa97}{00027} \textcolor{keywordtype}{int} \hyperlink{a00241_a0ddf1224851353fc92bfbff6f499fa97}{main}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}* argv[]) \{
00028   QCoreApplication a(argc, argv);
00029   qSetMessagePattern(
00030       \textcolor{stringliteral}{"%\{time boot\} :: [%\{type\}::%\{appname\} in %\{file\}:%\{line\} th:%\{threadid\}] "}
00031       \textcolor{stringliteral}{"message:: "}
00032       \textcolor{stringliteral}{"%\{message\} "}
00033       \textcolor{stringliteral}{"%\{backtrace [separator=\(\backslash\)"\(\backslash\)n\(\backslash\)t\(\backslash\)"]\}"});
00034 
00035   QTime midnight(0, 0, 0);
00036   qsrand(midnight.secsTo(QTime::currentTime()));
00037 
00038   \hyperlink{a00241_a3cfb6b17f20d62ad08b9402764f3aa6c}{initMainLooper}\hyperlink{a00241_a3cfb6b17f20d62ad08b9402764f3aa6c}{(}\hyperlink{a00241_a3cfb6b17f20d62ad08b9402764f3aa6c}{)};
00039 
00040   \hyperlink{a00241_a29060721f5ddfa26790f0778bde74ff2}{initServer}\hyperlink{a00241_a29060721f5ddfa26790f0778bde74ff2}{(}\hyperlink{a00241_a29060721f5ddfa26790f0778bde74ff2}{)};
00041 
00042   \textcolor{keywordflow}{return} a.exec();
00043 \}
\end{DoxyCode}
